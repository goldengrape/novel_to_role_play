# 《谜探》用户需求文档 (User Requirements Document)

- **项目名称:** “谜探”—— 智能悬疑小说剧本杀转换引擎
- **文档版本:** 1.1
- **文档状态:** 已确认
- **制定日期:** 2024年6月5日

## 1. 项目概述

### 1.1 项目目标
本项目的核心目标是开发一款基于先进大语言模型（LLM，以Gemini 2.5 Pro为技术核心）的软件工具。该工具旨在实现自动化或半自动化地将用户输入的悬疑小说文本，高效地转换为一套结构完整、逻辑严谨、可直接用于线下或线上游戏的剧本杀游戏包。

### 1.2 目标用户
- **剧本杀创作者/店家:** 希望快速获得新剧本的创作灵感，或将已有的文学IP改编为剧本杀游戏，以降低创作门槛和时间成本。
- **小说爱好者/跑团玩家:** 渴望将自己喜爱的小说作品，通过一种全新的、高互动性的游戏方式进行沉浸式体验。
- **内容创作者:** 需要快速生成剧本杀相关的内容素材（如故事梗概、人物小传、宣传文案等）用于其作品。

## 2. 用户需求清单 (Customer Attributes, CAs)

本章节详细定义了目标用户对产品的核心期望和要求。这些CAs是后续进行功能需求(FRs)分解和系统设计的根本依据。

### CA1: 核心转换功能 (Core Transformation Functionality)

- **CA1.1 - 故事主线提取与改编:** 用户期望软件能够自动识别并提炼出小说中的核心犯罪事件、主要人物矛盾冲突以及推动故事发展的关键情节，并基于这些元素将其改编成一条适合剧本杀游戏模式的核心故事线。
- **CA1.2 - 角色剧本生成:** 用户期望软件能为小说中的主要角色，生成独立的、第一人称视角的“人物剧本”。剧本需包含该角色的背景故事、不为人知的秘密、本场游戏的核心任务目标以及与其他关键角色的关系网。
- **CA1.3 - 游戏结构化:** 用户期望最终生成的游戏包具备标准剧本杀的游戏结构，清晰地划分为不同阶段，如：开场的故事背景介绍、分幕式（多轮）的搜证环节、引导性的圆桌讨论流程、以及最终的投票指认和真相复盘环节。
- **CA1.4 - 线索卡生成:** 用户期望软件能够从小说原文中自动挖掘，或基于原文信息智能生成与案件强相关的关键线索。这些线索应被制作成独立的“线索卡”，形式可包含文字、图片描述、对话节选等，并能按游戏轮次进行分发。
- **CA1.5 - 凶手与动机设定:** 用户期望软件能够基于小说情节，合理地指派一名角色为凶手，并为其构建逻辑自洽、令人信服的作案动机与犯罪手法。同时，软件需要为其他非凶手角色设计具备迷惑性的“嫌疑点”和个人秘密，以保证游戏的平衡性和趣味性。

### CA2: 输入与输出 (Input & Output)

- **CA2.1 - 灵活的输入方式:** 用户期望支持多样化的小说文本输入方式，包括但不限于：直接在文本框中复制粘贴、上传本地文件（.txt, .pdf, .epub等格式）、或通过提供网络小说的URL链接进行内容获取。
- **CA2.2 - 完整的输出包:** 用户期望能够一键导出或下载一个组织结构清晰的完整游戏包。该游戏包应以文件夹形式存在，标准内容物料应包含：
    - `主持人手册.pdf`: 包含完整故事真相、详细时间线、凶手信息、游戏流程控制指南及特殊事件处理方案（SOP）。
    - `角色剧本/`: 一个子文件夹，内含为每位玩家准备的独立PDF文件。
    - `线索卡/`: 一个子文件夹，存放按轮次整理好的线索卡（PDF或图片格式）。
    - `故事结局.pdf`: 用于最后阶段向所有玩家揭示真相的复盘文件。

### CA3: 用户定制与交互 (Customization & Interaction)

- **CA3.1 - 可配置的游戏参数:** 用户期望在生成任务开始前，可以对一些关键游戏参数进行自定义设置，以满足不同需求。可配置项应至少包括：
    - **游戏人数:** 允许用户指定最终生成的剧本所支持的玩家数量。
    - **游戏难度:** 提供如“新手友好”、“进阶烧脑”、“硬核推理”等级别选项。
    - **游戏时长:** 允许用户选择一个期望的游戏总时长（例如：3小时、5小时）。
- **CA3.2 - 引导式生成流程:** 用户强烈期望软件并非一个完全自动化的“黑箱”，而是能在一个引导式的流程中，让用户参与关键环节的决策。该流程应包括：
    - **CA3.2.1 - 角色确认与选择:** 在系统完成**故事主线提取(CA1.1)**后，应向用户展示一个从小说中识别出的关键人物列表。用户可以基于此列表，**勾选**出希望在本局游戏中登场的玩家角色。
    - **CA3.2.2 - 凶手确认与指定:** 在用户确定了玩家角色后，系统可基于情节逻辑，向用户推荐一至多名最适合扮演凶手的角色候选人（并附上简要推荐理由）。用户可以**确认**系统的推荐，也可以**覆盖**该推荐，自行指定任意一名已选角色为凶手。
    - **CA3.2.3 - 生成后审查与编辑:** 在系统初步生成所有内容（人物剧本、线索卡等）之后，用户期望有一个集中的、易于操作的编辑界面，以便对AI生成的所有文本进行人工审查、修改和润色，确保最终交付物的质量。

### CA4: 质量与体验 (Quality & Experience)

- **CA4.1 - 逻辑严谨性 (最高优先级):** 此为产品的核心价值与不可妥协的底线。用户要求生成的剧本杀必须在逻辑上形成**完美闭环**。所有线索都必须指向唯一且确定的真相，故事时间线不允许存在冲突，各角色的动机和行为必须符合其人物设定，严禁出现任何悬而未决的矛盾或无法解释的逻辑漏洞。
- **CA4.2 - 风格一致性:** 用户期望AI生成的所有文本内容（包括人物小传、线索描述、故事叙述等），能够在语言风格和情感氛围上，与输入的原著小说保持高度一致。
- **CA4.3 - 创造性与趣味性:** 用户期望软件不仅是原文的忠实改编者，还能在尊重原著设定的基础上，发挥创造力，为游戏增加一些额外的互动环节、隐藏任务或彩蛋，提升游戏的可玩性和趣味性。
- **CA4.4 - 处理速度:** 用户期望有良好的性能体验。对于一本中等篇幅的小说（例如20万字），从输入到产出可编辑的初稿，整个过程应在可接受的时间内完成（目标：10分钟以内）。
